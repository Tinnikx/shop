# Docker 运行Mysql

```
sudo docker run -p 3306:3306 --name shop \
-v /home/kaixiang/shop-project/mydata/mysql/log:/var/log/mysql \
-v /home/kaixiang/shop-project/mydata/mysql/data:/var/lib/mysql \
-v /home/kaixiang/shop-project/mydata/mysql/conf/my.conf:/etc/mysql/my.conf \
-e MYSQL_ROOT_PASSWORD=52xiang! \
-d mysql:8.0.21

/var/log/mysql 为mysql的log目录
/var/lib/mysql 为mysql的data目录(持久化数据文件)

my.conf:
[mysqld]
user=mysql
character-set-server=utf8
default_authentication_plugin=mysql_native_password
#此项配置必须有(这是新特性), 否则在运行的docker的时候会报错 Failed to access directory for --secure-file-priv. Please make sure that directory exists and is accessible by MySQL Server. Supplied value : /var/lib/mysql-files
secure_file_priv=/var/lib/mysql-files
expire_logs_days=7
sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION
max_connections=1000

[client]
default-character-set=utf8

[mysql]
default-character-set=utf8

```

# Docker 运行 Redis

```
sudo docker run -p 6379:6379 --name shop-redis \
-v /home/kaixiang/shop-project/mydata/redis/data:/data \
-v /home/kaixiang/shop-project/mydata/redis/conf/redis.conf:/etc/redis/redis.conf \
-d redis:6.0.6-buster /etc/redis/redis.conf

/data redis持久化的本地数据文件夹

redis.conf:
#开启持久化
appendonly yes

```

